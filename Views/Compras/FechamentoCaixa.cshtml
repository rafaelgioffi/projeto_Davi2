@model List<ProjetoFinal.Models.Compra>

@* <form asp-action="FechamentoCaixa" method="post" class="row row-cols-lg-auto g-3 align-items-center">
    <div class="col-12">
        <div class="input-group">
            <label for="DataSel" class="control-label">Qual data gostaria de ver o fechamento do caixa? </label>
            <input id="dataSel" name="dataSel" type="date" class="form-control" />
        </div>
    </div>
    <button type="submit" class="col-md-2 btn btn-success">Exibir Vendas</button>
</form> *@

@if (Model != null && Model.Any())
{
    <h3>Vendas realizadas no dia @ViewBag.dataSel.ToShortDateString()</h3>
    <hr />
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th class="col-md-1 text-center">Código</th>
                <th class="col-md-2 text-center">Hora da Venda</th>
                <th class="col-md-2 text-center">Forma de Pagamento</th>
                <th class="col-md-2 text-center">Valor Unitário</th>
                <th class="col-md-2 text-center">Cliente</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var v in Model)
            {
                <tr>
                    <td class="text-center">@v.CompraID</td>
                    <td class="text-center">@v.DataCompra.ToShortTimeString()</td>
                    <td class="text-center">@v.FormaPagamento</td>
                    <td class="text-center">@v.Produto.PrecoUnit.ToString("C")</td>
                    <td class="text-center">@v.Cliente.Nome</td>
                </tr>
            }
        </tbody>
    </table>
            <hr />
            <div class="align-right">
            <h5 class="text-right text-black">Total em vendas: @Model.Sum(p => p.Produto.PrecoUnit).ToString("C")</h5>
            </div>
}
else
{
    <h2 class="col-12">Nenhuma compra realizada na data selecionada.</h2>
}
<a asp-controller="Compras" asp-action="Index" type="button" class="btn btn-primary m-2"><i class="bi bi-reply"></i> Voltar</a>
<a href="javascript:window.print()" class="btn btn-success"><i class="bi bi-printer-fill"></i> Imprimir</a>